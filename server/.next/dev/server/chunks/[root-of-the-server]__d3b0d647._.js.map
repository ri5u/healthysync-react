{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Akanksh%20Rakesh/Desktop/HealthSync-React/server/app/api/%5B...path%5D/route.ts"],"sourcesContent":["// Proxy handler: forwards any incoming /api/* request to the configured API target.\r\n// Configure target with environment variable `API_TARGET`, e.g. http://localhost:3000\r\n\r\nconst API_TARGET = process.env.API_TARGET || process.env.NEXT_PUBLIC_API_TARGET || 'http://localhost:3000'\r\n\r\nasync function forward(req: Request) {\r\n  try {\r\n    const url = new URL(req.url)\r\n    // Keep the same path and search when forwarding\r\n    const forwardUrl = `${API_TARGET}${url.pathname}${url.search}`\r\n\r\n    // Clone headers and remove host\r\n    const outHeaders = new Headers()\r\n    req.headers.forEach((v, k) => {\r\n      if (k.toLowerCase() === 'host') return\r\n      outHeaders.set(k, v)\r\n    })\r\n\r\n    // Prepare body: avoid passing the raw stream (which requires `duplex`).\r\n    let body: ArrayBuffer | undefined = undefined\r\n    if (!['GET', 'HEAD'].includes(req.method)) {\r\n      try {\r\n        body = await req.arrayBuffer()\r\n      } catch (e) {\r\n        // fall back to undefined if body can't be read\r\n        body = undefined\r\n      }\r\n    }\r\n\r\n    // Forward the request\r\n    const res = await fetch(forwardUrl, {\r\n      method: req.method,\r\n      headers: outHeaders,\r\n      body,\r\n      // keep credentials policy default - let target decide\r\n    })\r\n\r\n    // Build headers for response, but strip hop-by-hop headers\r\n    const responseHeaders = new Headers()\r\n    res.headers.forEach((v, k) => {\r\n      const lk = k.toLowerCase()\r\n      if (['connection', 'keep-alive', 'transfer-encoding', 'upgrade'].includes(lk)) return\r\n      responseHeaders.set(k, v)\r\n    })\r\n\r\n  const respBody = await res.arrayBuffer()\r\n  return new Response(respBody, { status: res.status, headers: responseHeaders })\r\n  } catch (err) {\r\n    // eslint-disable-next-line no-console\r\n    console.error('proxy error', err)\r\n    return new Response(JSON.stringify({ error: 'proxy failed' }), { status: 502, headers: { 'content-type': 'application/json' } })\r\n  }\r\n}\r\n\r\nexport const GET = forward\r\nexport const POST = forward\r\nexport const PUT = forward\r\nexport const PATCH = forward\r\nexport const DELETE = forward\r\nexport const OPTIONS = forward\r\n"],"names":[],"mappings":"AAAA,oFAAoF;AACpF,sFAAsF;;;;;;;;;;;;;;;AAEtF,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI,QAAQ,GAAG,CAAC,sBAAsB,IAAI;AAEnF,eAAe,QAAQ,GAAY;IACjC,IAAI;QACF,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;QAC3B,gDAAgD;QAChD,MAAM,aAAa,GAAG,aAAa,IAAI,QAAQ,GAAG,IAAI,MAAM,EAAE;QAE9D,gCAAgC;QAChC,MAAM,aAAa,IAAI;QACvB,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG;YACtB,IAAI,EAAE,WAAW,OAAO,QAAQ;YAChC,WAAW,GAAG,CAAC,GAAG;QACpB;QAEA,wEAAwE;QACxE,IAAI,OAAgC;QACpC,IAAI,CAAC;YAAC;YAAO;SAAO,CAAC,QAAQ,CAAC,IAAI,MAAM,GAAG;YACzC,IAAI;gBACF,OAAO,MAAM,IAAI,WAAW;YAC9B,EAAE,OAAO,GAAG;gBACV,+CAA+C;gBAC/C,OAAO;YACT;QACF;QAEA,sBAAsB;QACtB,MAAM,MAAM,MAAM,MAAM,YAAY;YAClC,QAAQ,IAAI,MAAM;YAClB,SAAS;YACT;QAEF;QAEA,2DAA2D;QAC3D,MAAM,kBAAkB,IAAI;QAC5B,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG;YACtB,MAAM,KAAK,EAAE,WAAW;YACxB,IAAI;gBAAC;gBAAc;gBAAc;gBAAqB;aAAU,CAAC,QAAQ,CAAC,KAAK;YAC/E,gBAAgB,GAAG,CAAC,GAAG;QACzB;QAEF,MAAM,WAAW,MAAM,IAAI,WAAW;QACtC,OAAO,IAAI,SAAS,UAAU;YAAE,QAAQ,IAAI,MAAM;YAAE,SAAS;QAAgB;IAC7E,EAAE,OAAO,KAAK;QACZ,sCAAsC;QACtC,QAAQ,KAAK,CAAC,eAAe;QAC7B,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAe,IAAI;YAAE,QAAQ;YAAK,SAAS;gBAAE,gBAAgB;YAAmB;QAAE;IAChI;AACF;AAEO,MAAM,MAAM;AACZ,MAAM,OAAO;AACb,MAAM,MAAM;AACZ,MAAM,QAAQ;AACd,MAAM,SAAS;AACf,MAAM,UAAU","debugId":null}}]
}